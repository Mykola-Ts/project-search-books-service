(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerpolicy&&(c.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?c.credentials="include":n.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(n){if(n.ep)return;n.ep=!0;const c=o(n);fetch(n.href,c)}})();const r={LIGHT:"light-theme",DARK:"dark-theme"},d=document.body,u=document.querySelector(".header"),b=document.querySelector(".theme-switch-toggle");b.addEventListener("change",S);I();function S(e){e.currentTarget.checked?(u.classList.add(r.DARK),d.classList.add(r.DARK),u.classList.remove(r.LIGHT),d.classList.remove(r.LIGHT),localStorage.setItem("theme",r.DARK)):(d.classList.add(r.LIGHT),u.classList.add(r.LIGHT),d.classList.remove(r.DARK),u.classList.remove(r.DARK),localStorage.setItem("theme",r.LIGHT))}function I(){const e=localStorage.getItem("theme");console.log(e),e?(d.classList.add(e),u.classList.add(e),e===r.DARK&&(b.checked=!0)):(d.classList.add(r.LIGHT),u.classList.add(r.LIGHT))}const w="https://books-backend.p.goit.global/books",i="all categories";async function p(e){try{const t=await fetch(`${w}${e}`);if(!t.ok)throw new Error(t.statusText);return await t.json()}catch(t){console.error("Error request data:",t)}}async function B(e){return await p(`/category?category=${e}`)}function L(e){const t=document.createElement("div");return t.className="category",t.dataset.category=e,t.textContent=e,t.addEventListener("click",()=>{document.querySelectorAll(".category").forEach(o=>{o.classList.remove("selected-category")}),t.classList.add("selected-category"),e!==i?(y(e),v(e)):(y("Best Sellers Books"),E())}),e===i&&t.click(),t}function k({book_image:e,title:t,author:o}){const s=document.createElement("div");return s.className="book",s.innerHTML=`
    <img src="${e}" alt="${t}">
    <h3 class="book-title">${t}</h3>
    <p class="book-author">by ${o}</p>
    `,s}function H(e,t){const o=document.createElement("div");o.className="category-books";const s=document.createElement("div");s.className="category-header";const n=e===i?"Best Sellers Books":e;s.innerHTML=`<h2 class="category-title">${n}</h2>`;const c=document.createElement("div");c.className="category-content",t.forEach(T=>c.appendChild(k(T)));const a=document.createElement("button");return a.className="see-more",a.textContent="SEE MORE",a.addEventListener("click",()=>v(e)),o.appendChild(s),o.appendChild(c),o.appendChild(a),o}async function v(e){y(e);const t=document.getElementById("books");t.innerHTML="Loading...";const o=await B(e);t.innerHTML="",o.forEach(s=>t.appendChild(k(s)))}async function E(){y(i);const e=document.querySelectorAll(".category"),t=document.getElementById("books");t.innerHTML="";for(const o of e){const s=o.textContent;if(s===i)continue;const n=await p(`/category?category=${s}`);t.appendChild(H(s,n.slice(0,5)))}}function y(e){const t=document.querySelector(".title-category");let o=e===i?"Best Sellers Books":e;o=o.split(" ");const s=o.pop();t.innerHTML=`${o.join(" ")} <span class="title-category-span">${s}</span>`}async function D(){const e=await p("/top-books"),t=document.getElementById("categoryList");t.appendChild(L(i)),e.forEach(({list_name:o})=>t.appendChild(L(o))),E()}document.addEventListener("DOMContentLoaded",D);const l={slider:document.querySelector(".slider"),sliderList:document.querySelector(".slider-list"),sliderItem:document.querySelectorAll(".slider-item"),btnNext:document.querySelector(".slider-btn-next"),btnPrev:document.querySelector(".slider-btn-prev")};let m=0,A=52;l.btnNext.addEventListener("click",N);function N(){m+=1,C(),l.slider.clientHeight===188?m>=l.sliderItem.length-4&&(g(l.btnNext),h(l.btnPrev)):l.slider.clientHeight===292&&m>=l.sliderItem.length-6&&(g(l.btnNext),h(l.btnPrev))}l.btnPrev.addEventListener("click",q);function q(){m-=1,C(),m===0&&(h(l.btnNext),g(l.btnPrev))}function C(){l.sliderList.style.transform=`translateY(${-m*A}px)`}function h(e){e.style.display="block"}function g(e){e.style.display="none"}const f=document.querySelector(".js-btn-up");f.classList.add("is-hidden");window.addEventListener("scroll",()=>{window.scrollY>20?f.classList.remove("is-hidden"):f.classList.add("is-hidden")});f.addEventListener("click",()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})});
