import"./shopping-list-db3619a4.js";const n={LIGHT:"light-theme",DARK:"dark-theme"},a=document.body,l=document.querySelector(".header"),k=document.querySelector(".theme-switch-toggle");k.addEventListener("change",S);B();function S(e){e.currentTarget.checked?(l.classList.add(n.DARK),a.classList.add(n.DARK),l.classList.remove(n.LIGHT),a.classList.remove(n.LIGHT),localStorage.setItem("theme",n.DARK)):(a.classList.add(n.LIGHT),l.classList.add(n.LIGHT),a.classList.remove(n.DARK),l.classList.remove(n.DARK),localStorage.setItem("theme",n.LIGHT))}function B(){const e=localStorage.getItem("theme");console.log(e),e?(a.classList.add(e),l.classList.add(e),e===n.DARK&&(k.checked=!0)):(a.classList.add(n.LIGHT),l.classList.add(n.LIGHT))}const H="https://books-backend.p.goit.global/books",r="all categories";async function f(e){try{const t=await fetch(`${H}${e}`);if(!t.ok)throw new Error(t.statusText);return await t.json()}catch(t){console.error("Error request data:",t)}}async function I(e){return await f(`/category?category=${e}`)}function p(e){const t=document.createElement("div");return t.className="category",t.dataset.category=e,t.textContent=e,t.addEventListener("click",()=>{document.querySelectorAll(".category").forEach(o=>{o.classList.remove("selected-category")}),t.classList.add("selected-category"),e!==r?(u(e),v(e)):(u("Best Sellers Books"),E())}),e===r&&t.click(),t}function b({book_image:e,title:t,author:o}){const s=document.createElement("div");return s.className="book",s.innerHTML=`
    <img src="${e}" alt="${t}">
    <h3 class="book-title">${t}</h3>
    <p class="book-author">by ${o}</p>
    `,s}function w(e,t){const o=document.createElement("div");o.className="category-books";const s=document.createElement("div");s.className="category-header";const y=e===r?"Best Sellers Books":e;s.innerHTML=`<h2 class="category-title">${y}</h2>`;const h=document.createElement("div");h.className="category-content",t.forEach(T=>h.appendChild(b(T)));const d=document.createElement("button");return d.className="see-more",d.textContent="SEE MORE",d.addEventListener("click",()=>v(e)),o.appendChild(s),o.appendChild(h),o.appendChild(d),o}async function v(e){u(e);const t=document.getElementById("books");t.innerHTML="Loading...";const o=await I(e);t.innerHTML="",o.forEach(s=>t.appendChild(b(s)))}async function E(){u(r);const e=document.querySelectorAll(".category"),t=document.getElementById("books");t.innerHTML="";for(const o of e){const s=o.textContent;if(s===r)continue;const y=await f(`/category?category=${s}`);t.appendChild(w(s,y.slice(0,5)))}}function u(e){const t=document.querySelector(".title-category");let o=e===r?"Best Sellers Books":e;o=o.split(" ");const s=o.pop();t.innerHTML=`${o.join(" ")} <span class="title-category-span">${s}</span>`}async function D(){const e=await f("/top-books"),t=document.getElementById("categoryList");t.appendChild(p(r)),e.forEach(({list_name:o})=>t.appendChild(p(o))),E()}document.addEventListener("DOMContentLoaded",D);const c={slider:document.querySelector(".slider"),sliderList:document.querySelector(".slider-list"),sliderItem:document.querySelectorAll(".slider-item"),btnNext:document.querySelector(".slider-btn-next"),btnPrev:document.querySelector(".slider-btn-prev")};let i=0,x=52;c.btnNext.addEventListener("click",A);function A(){i+=1,C(),c.slider.clientHeight===188?i>=c.sliderItem.length-4&&(L(c.btnNext),g(c.btnPrev)):c.slider.clientHeight===292&&i>=c.sliderItem.length-6&&(L(c.btnNext),g(c.btnPrev))}c.btnPrev.addEventListener("click",q);function q(){i-=1,C(),i===0&&(g(c.btnNext),L(c.btnPrev))}function C(){c.sliderList.style.transform=`translateY(${-i*x}px)`}function g(e){e.style.display="block"}function L(e){e.style.display="none"}const m=document.querySelector(".js-btn-up");m.classList.add("is-hidden");window.addEventListener("scroll",()=>{window.scrollY>20?m.classList.remove("is-hidden"):m.classList.add("is-hidden")});m.addEventListener("click",()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})});
